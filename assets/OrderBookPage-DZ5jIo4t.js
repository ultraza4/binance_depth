import{_ as q,a as z,u as D,P as J,V as Y,c as V,e as p,b as v}from"./VTable-Dk_DNMbT.js";import{i as _,j as m,k as x,m as O,l as $,n as A,q as y,s as E,r as H,o as X,w as Z,a as g,c as ee,b as u,d as s,e as i,u as te,v as j,f as h,g as N,F as P,t as f,p as se,h as ae}from"./index-B1ctHv4U.js";const F=_.reduce((e,l)=>(e[l]={type:[Boolean,String,Number],default:!1},e),{}),I=_.reduce((e,l)=>{const t="offset"+m(l);return e[t]={type:[String,Number],default:null},e},{}),T=_.reduce((e,l)=>{const t="order"+m(l);return e[t]={type:[String,Number],default:null},e},{}),w={col:Object.keys(F),offset:Object.keys(I),order:Object.keys(T)};function le(e,l,t){let n=e;if(!(t==null||t===!1)){if(l){const a=l.replace(e,"");n+=`-${a}`}return e==="col"&&(n="v-"+n),e==="col"&&(t===""||t===!0)||(n+=`-${t}`),n.toLowerCase()}}const ne=["auto","start","end","center","baseline","stretch"],oe=x({cols:{type:[Boolean,String,Number],default:!1},...F,offset:{type:[String,Number],default:null},...I,order:{type:[String,Number],default:null},...T,alignSelf:{type:String,default:null,validator:e=>ne.includes(e)},...O(),...$()},"VCol"),B=A()({name:"VCol",props:oe(),setup(e,l){let{slots:t}=l;const n=y(()=>{const a=[];let d;for(d in w)w[d].forEach(r=>{const o=e[r],C=le(d,r,o);C&&a.push(C)});const c=a.some(r=>r.startsWith("v-col-"));return a.push({"v-col":!c||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),a});return()=>{var a;return E(e.tag,{class:[n.value,e.class],style:e.style},(a=t.default)==null?void 0:a.call(t))}}}),S=["start","end","center"],G=["space-between","space-around","space-evenly"];function k(e,l){return _.reduce((t,n)=>{const a=e+m(n);return t[a]=l(),t},{})}const re=[...S,"baseline","stretch"],M=e=>re.includes(e),U=k("align",()=>({type:String,default:null,validator:M})),ce=[...S,...G],R=e=>ce.includes(e),W=k("justify",()=>({type:String,default:null,validator:R})),ue=[...S,...G,"stretch"],K=e=>ue.includes(e),Q=k("alignContent",()=>({type:String,default:null,validator:K})),L={align:Object.keys(U),justify:Object.keys(W),alignContent:Object.keys(Q)},ie={align:"align",justify:"justify",alignContent:"align-content"};function de(e,l,t){let n=ie[e];if(t!=null){if(l){const a=l.replace(e,"");n+=`-${a}`}return n+=`-${t}`,n.toLowerCase()}}const fe=x({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:M},...U,justify:{type:String,default:null,validator:R},...W,alignContent:{type:String,default:null,validator:K},...Q,...O(),...$()},"VRow"),ge=A()({name:"VRow",props:fe(),setup(e,l){let{slots:t}=l;const n=y(()=>{const a=[];let d;for(d in L)L[d].forEach(c=>{const r=e[c],o=de(d,c,r);o&&a.push(o)});return a.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),a});return()=>{var a;return E(e.tag,{class:["v-row",n.value,e.class],style:e.style},(a=t.default)==null?void 0:a.call(t))}}}),b=e=>(se("data-v-1cacc583"),e=e(),ae(),e),he={class:"order_book_page"},ye=b(()=>s("h2",null,"Order Book",-1)),_e=b(()=>s("h3",null,"Limit",-1)),be={class:"order_book_page-depth"},me=b(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Price"),s("th",{class:"text-left hide-on-mobile"},"Quantity"),s("th",{class:"text-left"},"Total")])],-1)),Se={class:"hide-on-mobile"},ke=b(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Price"),s("th",{class:"text-left hide-on-mobile"},"Quantity"),s("th",{class:"text-left"},"Total")])],-1)),Ce={class:"hide-on-mobile"},Ve={__name:"OrderBookPage",setup(e){const l=H(100),t=z(),n=D(),a=y(()=>Object.entries(t.bids).sort((c,r)=>parseFloat(r[0])-parseFloat(c[0]))),d=y(()=>Object.entries(t.asks).sort((c,r)=>parseFloat(c[0])-parseFloat(r[0])));return X(async()=>{Object.keys(t.bids).length===0&&(await t.fetchSnapshot(n.currency),t.setWebSocket(n.currency))}),Z(l,async c=>{t.limit=c,await t.fetchSnapshot(n.currency,c),t.closeWebSocket(),t.isFirstMessage=!0,t.setWebSocket(n.currency)}),(c,r)=>(g(),ee(J,null,{default:u(()=>[s("div",he,[ye,s("div",null,[_e,i(Y,{items:te(t).limitItems,modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=o=>l.value=o)},null,8,["items","modelValue"])]),s("div",be,[i(ge,null,{default:u(()=>[i(B,{cols:"12",md:"6"},{default:u(()=>[i(V,{class:"order-card"},{default:u(()=>[i(p,null,{default:u(()=>[j(" Bids ")]),_:1}),i(v,{class:"order-table",theme:"light","fixed-header":!0,height:600},{default:u(()=>[me,s("tbody",null,[(g(!0),h(P,null,N(a.value,o=>(g(),h("tr",{key:o.id},[s("td",null,f(o[0]),1),s("td",Se,f(o[1]),1),s("td",null,f(o[0]*o[1]),1)]))),128))])]),_:1})]),_:1})]),_:1}),i(B,{cols:"12",md:"6"},{default:u(()=>[i(V,{class:"order-card"},{default:u(()=>[i(p,null,{default:u(()=>[j(" Asks ")]),_:1}),i(v,{class:"order-table",theme:"light","fixed-header":!0,height:600},{default:u(()=>[ke,s("tbody",null,[(g(!0),h(P,null,N(d.value,o=>(g(),h("tr",{key:o.id},[s("td",null,f(o[0]),1),s("td",Ce,f(o[1]),1),s("td",null,f(o[0]*o[1]),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}))}},je=q(Ve,[["__scopeId","data-v-1cacc583"]]);export{je as default};
